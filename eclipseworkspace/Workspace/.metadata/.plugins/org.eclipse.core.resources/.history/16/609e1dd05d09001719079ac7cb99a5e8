package com.baidu.action;

import java.util.List;

import com.baidu.dto.Bean;
import com.baidu.service.Service;
import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

public class BeanAction extends ActionSupport {

	private static final long serialVersionUID = 2588123718017339878L;

	private List<?> list;
	private Bean bean;
	private int tid;
	private int rid[];
	private Service service = new Service();
	
	public String list(){
		list = service.getist();
		return "success";
	}
	public String toadd(){
		List<Bean> list = service.loadRoles();
		ActionContext.getContext().put("list", list);
		return "success";
	}
	public String add(){
		int m = service.add(bean,rid);
		System.out.println("......add>>>收到的值是"+bean);
		for(int i:rid){
			System.out.println(i);
		}
		return m==1? "redirect":"input";
	}
	public String delete(){
		int m = service.delete(bean);
		return m >= 1? "redirect":"input";
	}
	public String toupdate(){
		List<Bean> list = service.loadRoles();
		ActionContext.getContext().put("list", list);
		this.bean = service.getBeanById(tid);
		list = service.loadRolesById(tid);
		System.out.println(list);
		Object rid[] = list.toArray();
		ActionContext.getContext().put("rid", rid);
		return "success";
	}
	
	
	
	
	
	
	
	public List<?> getList() {
		return list;
	}
	public void setList(List<?> list) {
		this.list = list;
	}
	public Bean getBean() {
		return bean;
	}
	public void setBean(Bean bean) {
		this.bean = bean;
	}

	public int getTid() {
		return tid;
	}

	public void setTid(int tid) {
		this.tid = tid;
	}

	public int[] getRid() {
		return rid;
	}

	public void setRid(int rid[]) {
		this.rid = rid;
	}
}
