var FDDatePick=function(a){FDDatePick.superclass.constructor.call(this,a);this.options=FDLib.util.apply(this.getOptions(),a);FDDatePick.instance=this;if(!FDDatePick.calendar){FDDatePick.calendar=new FDCalendar({onclick:this.options.onclick,onclear:this.options.onclear});FDDatePick.calendar.calendarDiv.style.position="absolute";FDDatePick.calendar.calendarDiv.style.zIndex=9999;FDDatePick.calendar.hide()}this.clickTarget=FDLib.getEl("clickId")||this.getControlDom();this._registCalendar();FDDatePick.calendar._runOnclearHandler()};FDLib.extend(FDDatePick,FDTextBox);FDDatePick.prototype.getOptions=function(){var a=FDDatePick.superclass.getOptions.call(this);return FDLib.util.apply(a,{value:"",clickId:"",onclick:function(b,c){FDDatePick.instance.setValue(b);c.hide()},onclear:function(b,c){FDDatePick.instance.setValue(FDDatePick.instance.options.defaultValue);c.hide()},isShowTime:false,offsetX:0,offsetY:26,format:FDCalendar.FORMAT_YMD,defaultValue:""})};FDDatePick.prototype._registCalendar=function(){var e=this;var a=FDDatePick.calendar;var c=a.getCalendarDom();var b=this.clickTarget;var d=FDLib.event;b.style.cursor="pointer";FDLib.event.addEvent(b,"click",function(){FDDatePick.instance=e;e.showCalendar()});d.addEvent(document,"click",function(g){var f=g.target;if(b.disabled){return}while(f){if(f!=document){if(f===c||f===b){break}f=f.parentNode}else{a.hide();break}}})};FDDatePick.prototype._setPosition=function(d){var c=FDLib.dom.getOffset(d);var a=this.options;var b=FDDatePick.calendar.getCalendarDom();b.style.left=c.left+a.offsetX+"px";b.style.top=c.top+a.offsetY+"px"};FDDatePick.prototype.showCalendar=function(){this._setPosition(this.clickTarget);FDDatePick.calendar.show(this.getValue())};FDDatePick.prototype.setValue=function(b){var a=FDLib.date.isDateStr(b);if(a){FDDatePick.superclass.setValue.call(this,b)}else{FDDatePick.superclass.setValue.call(this,this.options.defaultValue)}};FDDatePick.prototype.getValue=function(){var a=FDDatePick.superclass.getValue.call(this);return FDLib.date.isDateStr(a)?a:""};FDDatePick.prototype.disable=function(){FDDatePick.superclass.disable.call(this);this.clickTarget.title=""};FDDatePick.prototype.enable=function(){FDDatePick.superclass.enable.call(this);this.clickTarget.title="点击选择时间"};