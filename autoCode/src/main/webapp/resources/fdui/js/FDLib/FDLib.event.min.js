FDLib.event={addEvent:function(a,e,c){var d=this;var b=function(f,g){return function(){var h=d.getEvent();f.call(g,h)}};if(a.addEventListener){this.addEvent=function(f,h,g){f.addEventListener(h,b(g,f),false)}}else{if(a.attachEvent){this.addEvent=function(f,h,g){f.attachEvent("on"+h,b(g,f))}}else{this.addEvent=function(f,h,g){f["on"+h]=b(g,f)}}}this.addEvent(a,e,c)},addBatchEvent:function(c){var b=this;var f=c.superDom,d=c.tagName,a=c.eventName,e=c.handler;this.addEvent(f,a,function(){var h=b.getEvent();var g=h.target;if(g.tagName!==d){return}e(g);h.preventDefault();h.stopPropagation()})},removeEvent:function(a,c,b){if(a.removeEventListener){this.removeEvent=function(d,f,e){d.removeEventListener(f,e,false)}}else{if(a.detachEvent){this.removeEvent=function(d,f,e){d.detachEvent("on"+f,e)}}else{this.removeEvent=function(d,f,e){d["on"+f]=null}}}this.removeEvent(a,c,b)},formatEvent:function(a){if(FDLib.browser.isIE()){a.charCode=(a.type=="keypress")?a.charCode:0;a.eventPhase=2;a.isChar=(a.charCode>0);a.pageX=a.clientX+document.body.scrollLeft;a.pageY=a.clientY+document.body.scrollTop;a.preventDefault=function(){this.returnValue=false};if(a.type=="mouseout"){a.relateTarget=a.toElement}else{if(a.type=="mouseover"){a.relateTarget=a.fromElement}}a.stopPropagation=function(){this.cancelBubble=true};a.target=a.srcElement;a.timestamp=(new Date()).getTime()}return a},getEvent:function(){if(window.event){return this.formatEvent(window.event)}else{return this.getEvent.caller.arguments[0]}},registClickOtherHide:function(c,b){var a=this;this.addEvent(document,"click",function(){var f=a.getEvent();var d=f.target;while(d){if(d!=document){if(d===b||d===c){b.style.display="block";return}d=d.parentNode}else{b.style.display="none";return}}})}};