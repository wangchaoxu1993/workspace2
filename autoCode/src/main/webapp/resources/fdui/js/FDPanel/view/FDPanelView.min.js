var FDPanelView=function(a){this.options=a;this.panelCount=FDControl.generateCount();FDPanelView.panelMap[this.panelCount]=this;this.panelContentDivId=this.options.domId+"_panelContentDivId_"+this.panelCount;this.titleDivId=this.options.domId+"_titleDivId_"+this.panelCount;this.contentId=this.options.domId+"_contId_"+this.panelCount;this.titleId=this.options.domId+"_titleId_"+this.panelCount;this.toggleBtnId=this.options.domId+"toggleBtnId"+this.panelCount;this.closeBtnId=this.options.domId+"closeBtnId"+this.panelCount;this.panelDiv=document.createElement(FDTag.DIV);this.panelDiv.style.display="none";this.titleDiv;this.panelContentDiv;this.titleH3;this.buildPanel();this._setSize();if(!this.isExpand()){this.unexpand()}if(this.options.closeable){FDLib.getEl(this.closeBtnId).style.display="block"}if(this.options.toggleable){this.getToggleTarget().style.display="block"}};FDPanelView.panelCount=0;FDPanelView.panelMap={};FDPanelView.prototype={show:function(){this.panelDiv.style.display=""},close:function(){this.panelDiv.style.display="none";return false},slideToggle:function(){if(this.isExpand()){this.unexpand()}else{this.expand()}return false},expand:function(){var a=this.getToggleTarget();this.getContentDiv().style.display="block";this.options.isExpand=true;a.title="点击收缩";FDLib.dom.removeClass(a,"ui-icon-plusthick");FDLib.dom.addClass(a,"ui-icon-minusthick")},unexpand:function(){var a=this.getToggleTarget();this.getContentDiv().style.display="none";this.options.isExpand=false;a.title="点击展开";FDLib.dom.addClass(a,"ui-icon-plusthick");FDLib.dom.removeClass(a,"ui-icon-minusthick")},isExpand:function(){var b=this.options;var a=b.isSlide;return !a||(b.isExpand&&a)},setWidth:function(a){if(FDLib.util.isString(a)){this.getPanelContentDiv().style.width=a}},setHeight:function(a){if(FDLib.util.isString(a)){this.getContentDiv().style.height=a}},setContent:function(a){this.getContentDiv().innerHTML=a},appendContentChild:function(a){this.getContentDiv().appendChild(a)},getContentDiv:function(){return FDLib.getEl(this.contentId)},getPanelDiv:function(){return this.panelDiv},setTitle:function(a){if(!this.titleH3){this.titleH3=FDLib.getEl(this.titleId)}this.titleH3.innerHTML=a},getTitleDiv:function(){if(!this.titleDiv){this.titleDiv=FDLib.getEl(this.titleDivId)}return this.titleDiv},getToggleTarget:function(){return FDLib.getEl(this.toggleBtnId)},getPanelContentDiv:function(){if(!this.panelContentDiv){this.panelContentDiv=FDLib.getEl(this.panelContentDivId)}return this.panelContentDiv},setStyle:function(a){if(FDLib.util.isString(a)){this.panelDiv.className=a}},buildPanel:function(){this._initPanelDivHtml();var b=this.getContentDom();wrap=FDLib.dom.wrap(b,"<div></div>");var a=b.cloneNode(true);this.appendContentChild(a);wrap.replaceChild(this.panelDiv,b)},getContentDom:function(){var a=FDLib.getEl(this.options.domId);if(!a){throw new Error("找不到窗体内容,请设置正确的domId,["+this.options.domId+"]")}return a},_initPanelDivHtml:function(){var b=this.getPanelDivTemplate();var a=FDLib.string.format(b,this._getTitleAndContentObj());this.panelDiv.innerHTML=a;document.body.appendChild(this.panelDiv)},_setSize:function(){var b=this.options.width;var a=this.options.height;this.setWidth(b);this.setHeight(a)},_getTitleAndContentObj:function(){return{title:this.options.title,toggleHandlerArea:this.getToggleHandlerArea(),closeHandlerArea:this.getCloseHandlerArea(),titleDivId:this.titleDivId,panelContentDivId:this.panelContentDivId,titleId:this.titleId,contentId:this.contentId,panelBoxId:this.panelBoxId,toggleBtnId:this.toggleBtnId,closeBtnId:this.closeBtnId}},getToggleHandlerArea:function(){if(this.options.isSlide){var a="FDPanelView.panelMap["+this.panelCount+"].slideToggle()";return'onclick="'+a+'"'}return""},getCloseHandlerArea:function(){var a="FDPanelView.panelMap["+this.panelCount+"].close()";return'onclick="'+a+'"'},getPanelDivTemplate:function(){return FDPanelView.panelFrameTemplate}};FDPanelView.panelFrameTemplate=['<div id="{panelContentDivId}" class="pui-panel ui-widget ui-widget-content ui-corner-all">','<div id="{titleDivId}" class="pui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all">','<span id="{titleId}" class="ui-panel-title">{title}</span>','<a id="{closeBtnId}" {closeHandlerArea} style="display:none;" class="pui-panel-titlebar-icon ui-corner-all ui-state-default" href="#">','<span class="ui-icon ui-icon-closethick"></span>',"</a>",'<a id="{toggleBtnId}" {toggleHandlerArea} style="display:none;" class="pui-panel-titlebar-icon ui-corner-all ui-state-default" href="#">','<span id="{toggleBtnId}" class="ui-icon ui-icon-minusthick"></span>',"</a>","</div>",'<div id="{contentId}" class="pui-panel-content ui-widget-content">',"</div>","</div>"].join("");